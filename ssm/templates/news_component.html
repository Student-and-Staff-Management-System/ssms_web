<div class="news-ticker-panel content-section">
    <div class="section-title"
        style="margin-bottom: 15px; padding-bottom: 10px; display: flex; align-items: center; gap: 10px;">
        ðŸ“¢ Announcements
    </div>

    <div class="news-scroll-window">
        <div class="news-scroll-content">
            {% if news_list %}
            {% for news in news_list %}
            <div class="news-item">
                <span class="news-date">{{ news.date|date:"M d, Y" }} <span
                        style="font-weight: 400; opacity: 0.7; font-size: 0.9em; margin-left: 5px;">{{news.date|time:"h:i A" }}</span></span>
                {% if news.link %}
                <p><a href="{{ news.link }}" target="_blank" class="news-link">
                        {{ news.content }} <span style="font-size: 0.8em;">ðŸ”—</span>
                    </a>
                    <span class="news-tag {{ news.target|lower }}">{{ news.target }}</span>
                </p>
                {% else %}
                <p>{{ news.content }} <span class="news-tag {{ news.target|lower }}">{{ news.target }}</span></p>
                {% endif %}
            </div>
            {% endfor %}
            <!-- Duplicate content logic handling by loop nature/scroll -->
            {% else %}
            <div class="news-item" style="text-align: center; color: var(--text-muted);">
                <p>No new announcements.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    /* Native Theme Integration */
    .news-ticker-panel {
        background: var(--card-bg, #fff);
        border-radius: var(--radius, 12px);
        box-shadow: var(--shadow, 0 4px 6px rgba(0, 0, 0, 0.05));
        padding: 20px;
        /* Standard card padding */
        margin-top: 25px;
        border: 1px solid var(--border-color, #e2e8f0);
        /* Subtle border like other cards */
    }

    /* Scroll Area */
    .news-scroll-window {
        height: 400px;
        /* Increased height as requested */
        overflow: hidden;
        position: relative;
    }

    /* Masking for smooth fade out */
    .news-scroll-window::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(to top, var(--card-bg, #fff), transparent);
        pointer-events: none;
    }

    .news-scroll-content {
        position: absolute;
        width: 100%;
        animation: scroll-vertical 25s linear infinite;
        top: 100%;
    }

    .news-ticker-panel:hover .news-scroll-content {
        animation-play-state: paused;
    }

    /* News Items */
    .news-item {
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px dashed var(--border-color, #e2e8f0);
    }

    .news-item:last-child {
        border-bottom: none;
    }

    .news-date {
        font-size: 0.75rem;
        font-weight: 700;
        color: var(--primary-color, #2c3e50);
        margin-bottom: 5px;
        display: block;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .news-item p {
        margin: 0;
        font-size: 0.95rem;
        color: var(--text-main, #334155);
        line-height: 1.6;
    }

    .news-link {
        color: var(--accent-color, #2563eb);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
    }

    .news-link:hover {
        color: var(--primary-color, #1e293b);
        text-decoration: underline;
    }

    /* News Tags */
    .news-tag {
        font-size: 0.65rem;
        padding: 2px 6px;
        border-radius: 4px;
        margin-left: 8px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        vertical-align: middle;
        background: #e2e8f0;
        color: #64748b;
    }

    .news-tag.all {
        background: #dcfce7;
        color: #166534;
    }

    .news-tag.staff {
        background: #dbeafe;
        color: #1e40af;
    }

    .news-tag.student {
        background: #fae8ff;
        color: #86198f;
    }

    @keyframes scroll-vertical {
        0% {
            top: 100%;
        }

        100% {
            top: -150%;
        }

        /* Ensure clearance */
    }
</style>